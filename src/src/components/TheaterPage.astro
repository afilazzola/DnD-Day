---
interface Props {
  theater: {
    id: string;
    name: string;
    role: string;
    tone: string;
    color: string;
    icon: string;
    description: string;
    primaryObjectives: string[];
    secondaryObjectives?: string[];
    keyTension?: string;
    entryPoint?: string;
    successEffects: string[];
    failureEffects: string[];
    helps: string[];
    hurts: string[];
  };
}

const { theater } = Astro.props;

const colorBorderMap: Record<string, string> = {
  'theater-assault': 'border-theater-assault',
  'theater-siege': 'border-theater-siege',
  'theater-portals': 'border-theater-portals',
  'theater-air': 'border-theater-air',
};

const colorTextMap: Record<string, string> = {
  'theater-assault': 'text-theater-assault',
  'theater-siege': 'text-theater-siege',
  'theater-portals': 'text-theater-portals',
  'theater-air': 'text-theater-air',
};

const iconMap: Record<string, string> = {
  'sword': 'âš”ï¸',
  'catapult': 'ğŸ°',
  'portal': 'ğŸŒ€',
  'dragon': 'ğŸ‰',
};
---

<!-- Header -->
<section class="py-16 bg-dnd-bg-secondary">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto text-center">
      <a href="/theaters" class="inline-flex items-center gap-2 text-dnd-text-muted hover:text-dnd-text transition-colors mb-6">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to All Theaters
      </a>

      <div class="flex items-center justify-center gap-4 mb-4">
        <span class="text-5xl">{iconMap[theater.icon] || 'âš”ï¸'}</span>
      </div>

      <h1 class="text-3xl md:text-4xl font-display mb-2">
        <span class="gold-gradient">{theater.name}</span>
      </h1>

      <p class:list={['text-lg font-medium mb-2', colorTextMap[theater.color]]}>
        {theater.role}
      </p>

      <p class="text-dnd-text-muted italic">{theater.tone}</p>
    </div>
  </div>
</section>

<!-- Description -->
<section class="py-12">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto">
      <p class="text-dnd-text-muted text-lg leading-relaxed">
        {theater.description}
      </p>

      {theater.entryPoint && (
        <div class="card mt-6 border-l-4" class:list={[colorBorderMap[theater.color]]}>
          <p class="text-dnd-primary text-sm uppercase tracking-wider mb-2">Entry Point</p>
          <p class="text-dnd-text">{theater.entryPoint}</p>
        </div>
      )}

      {theater.keyTension && (
        <div class="card mt-6 border-l-4 border-dnd-secondary">
          <p class="text-dnd-secondary text-sm uppercase tracking-wider mb-2">Key Tension</p>
          <p class="text-dnd-text">{theater.keyTension}</p>
        </div>
      )}
    </div>
  </div>
</section>

<!-- Objectives -->
<section class="py-12 bg-dnd-bg-secondary">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-display text-dnd-primary mb-6">Objectives</h2>

      <div class="card mb-6">
        <h3 class="font-display text-dnd-text mb-4">Primary Objectives</h3>
        <ul class="space-y-3">
          {theater.primaryObjectives.map((objective) => (
            <li class="flex items-start gap-3">
              <span class="text-dnd-primary mt-1">â—</span>
              <span class="text-dnd-text-muted">{objective}</span>
            </li>
          ))}
        </ul>
      </div>

      {theater.secondaryObjectives && theater.secondaryObjectives.length > 0 && (
        <div class="card">
          <h3 class="font-display text-dnd-text mb-4">Secondary Objectives (Optional)</h3>
          <ul class="space-y-3">
            {theater.secondaryObjectives.map((objective) => (
              <li class="flex items-start gap-3">
                <span class="text-dnd-text-muted mt-1">â—‹</span>
                <span class="text-dnd-text-muted">{objective}</span>
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  </div>
</section>

<!-- Effects -->
<section class="py-12">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-display text-dnd-primary mb-6">Consequences</h2>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="card border-l-4 border-dnd-accent">
          <h3 class="font-display text-dnd-accent mb-4">If You Succeed</h3>
          <ul class="space-y-3">
            {theater.successEffects.map((effect) => (
              <li class="flex items-start gap-3">
                <span class="text-dnd-accent mt-1">âœ“</span>
                <span class="text-dnd-text-muted">{effect}</span>
              </li>
            ))}
          </ul>
        </div>

        <div class="card border-l-4 border-dnd-secondary">
          <h3 class="font-display text-dnd-secondary mb-4">If You Fail</h3>
          <ul class="space-y-3">
            {theater.failureEffects.map((effect) => (
              <li class="flex items-start gap-3">
                <span class="text-dnd-secondary mt-1">âœ—</span>
                <span class="text-dnd-text-muted">{effect}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Connections -->
<section class="py-12 bg-dnd-bg-secondary">
  <div class="container-custom">
    <div class="max-w-3xl mx-auto">
      <h2 class="text-2xl font-display text-dnd-primary mb-6">Theater Connections</h2>

      <div class="grid md:grid-cols-2 gap-6">
        <div class="card">
          <h3 class="font-display text-dnd-accent mb-3">Your Success Helps:</h3>
          <ul class="space-y-2">
            {theater.helps.map((item) => (
              <li class="text-dnd-text-muted">â€¢ {item}</li>
            ))}
          </ul>
        </div>

        <div class="card">
          <h3 class="font-display text-dnd-secondary mb-3">Your Failure Hurts:</h3>
          <ul class="space-y-2">
            {theater.hurts.map((item) => (
              <li class="text-dnd-text-muted">â€¢ {item}</li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="py-16">
  <div class="container-custom text-center">
    <h2 class="text-2xl md:text-3xl font-display mb-4">
      <span class="gold-gradient">Join This Theater</span>
    </h2>
    <p class="text-dnd-text-muted mb-8 max-w-xl mx-auto">
      Ready to fight in the {theater.name}? Sign up now and prepare for battle.
    </p>
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      <a href={`/signup?theater=${theater.id}`} class="btn btn-primary">
        Sign Up for This Theater
      </a>
      <a href="/theaters" class="btn btn-secondary">
        View Other Theaters
      </a>
    </div>
  </div>
</section>
